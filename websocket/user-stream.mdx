---
title: 'User Stream'
description: 'Real-time updates for user orders, fills, and balances'
---

## Overview

The `user` channel provides a unified stream of all user-specific events:
- Order placements (new orders resting on book)
- Order status changes (matching, partial fills, full fills)
- Order cancellations
- Balance updates after deposits/withdrawals

Upon subscription, you receive an **initial snapshot** of all open orders and balances, followed by real-time updates.

All prices and amounts are returned as **decimal strings** (e.g., `"0.65"`, `"1.5"`) matching the REST API format.

<Warning>
**Authentication Required**: The user stream requires authentication. See [WebSocket Authentication](/websocket/authentication) for details.
</Warning>

## Subscribe

To subscribe to the user stream, connect with authentication and send:

```json
{
  "method": "subscribe",
  "params": {
    "type": "user",
    "wallet_address": "YOUR_WALLET_ADDRESS"
  }
}
```

## Initial Snapshot

Immediately after subscribing, you receive the user's current state:

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "event_type": "snapshot",
    "orders": [
      {
        "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
        "orderbook_id": "5BNoPgYe_CrhujZLf",
        "order_hash": "0xabc123...",
        "side": "bid",
        "maker_amount": "2.000000",
        "taker_amount": "1.300000",
        "remaining": "1.000000",
        "filled": "1.000000",
        "price": "0.650000",
        "created_at": 1736456789000,
        "expiration": 0,
        "base_mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
        "quote_mint": "CrhujZLfmzffVjwUTk6wL1mYeF9nRkx4MBvHmEotnaDF",
        "outcome_index": 0,
        "status": "OPEN"
      }
    ],
    "balances": {
      "5BNoPgYe_CrhujZLf": {
        "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
        "orderbook_id": "5BNoPgYe_CrhujZLf",
        "outcomes": [
          {
            "outcome_index": 0,
            "mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
            "idle": "5.000000",
            "on_book": "2.000000"
          },
          {
            "outcome_index": 1,
            "mint": "79s9ZAcN4zeegreY5m5S86HEsEdCt2KibspWfoUsAq3s",
            "idle": "3.000000",
            "on_book": "0.000000"
          }
        ]
      }
    }
  }
}
```

## Order Events

Order events come with a `event_type` and `type` fields to distinguish event categories and fill lifecycle.

### Event Structure

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "event_type": "order",
    "type": "PLACEMENT | UPDATE | CANCELLATION",
    "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "timestamp": "2026-01-09T20:43:24.123Z",
    "order": {
      "order_hash": "0xabc123...",
      "status": "OPEN | MATCHING | FILLED | CANCELLED",
      "price": "0.650000",
      "fill_amount": "1.000000",
      "remaining": "0.000000",
      "filled": "1.000000",
      "side": "bid",
      "is_maker": false,
      "created_at": 1736456789000,
      "base_mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
      "quote_mint": "CrhujZLfmzffVjwUTk6wL1mYeF9nRkx4MBvHmEotnaDF",
      "outcome_index": 0,
      "balance": { ... }
    }
  }
}
```

### Order Lifecycle

| type | status | Description |
|------|--------|-------------|
| `PLACEMENT` | `OPEN` | New order placed on the orderbook |
| `UPDATE` | `MATCHING` | Order locked for in-flight blockchain transaction |
| `UPDATE` | `OPEN` | Partial fill completed (order still has remaining) |
| `UPDATE` | `OPEN` | Transaction failed, order rolled back to open |
| `UPDATE` | `FILLED` | Order fully filled (remaining = 0) |
| `CANCELLATION` | `CANCELLED` | Order cancelled by user |

### Status Definitions

- **OPEN**: Order is resting on the orderbook, available for matching
- **MATCHING**: Order is locked while the solana transaction awaits confirmation
- **FILLED**: Order has been completely filled (remaining = 0)
- **CANCELLED**: Order was cancelled by the user

### Example: Order Placement

```json
{
  "type": "user",
  "data": {
    "event_type": "order",
    "type": "PLACEMENT",
    "order": {
      "order_hash": "0xabc123...",
      "status": "OPEN",
      "remaining": "1.000000",
      "filled": "0.000000",
      "balance": { ... }
    }
  }
}
```

### Example: Order Matching (In-Flight Transaction)

```json
{
  "type": "user",
  "data": {
    "event_type": "order",
    "type": "UPDATE",
    "order": {
      "order_hash": "0xabc123...",
      "status": "MATCHING",
      "remaining": "1.000000",
      "filled": "0.000000"
    }
  }
}
```

### Example: Order Filled

```json
{
  "type": "user",
  "data": {
    "event_type": "order",
    "type": "UPDATE",
    "order": {
      "order_hash": "0xabc123...",
      "status": "FILLED",
      "remaining": "0.000000",
      "filled": "1.000000",
      "balance": { ... }
    }
  }
}
```

### Example: Order Cancelled

```json
{
  "type": "user",
  "data": {
    "event_type": "order",
    "type": "CANCELLATION",
    "order": {
      "order_hash": "0xabc123...",
      "status": "CANCELLED",
      "remaining": "0.000000",
      "filled": "0.500000",
      "balance": { ... }
    }
  }
}
```

## Balance Updates

Deposits and withdrawals trigger `balance_update` events:

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "event_type": "balance_update",
    "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "balance": {
      "outcomes": [
        {
          "outcome_index": 0,
          "mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
          "idle": "5.000000",
          "on_book": "0.000000"
        },
        {
          "outcome_index": 1,
          "mint": "79s9ZAcN4zeegreY5m5S86HEsEdCt2KibspWfoUsAq3s",
          "idle": "5.000000",
          "on_book": "0.000000"
        }
      ]
    },
    "timestamp": "2026-01-09T20:43:24.123Z"
  }
}
```

## Event Types Summary

| Event | Type | Description |
|------------|------|-------------|
| `snapshot` | - | Initial state with all open orders and balances |
| `order` | `PLACEMENT` | New order placed on book |
| `order` | `UPDATE` | Order status change (matching, filled, partial fill) |
| `order` | `CANCELLATION` | Order cancelled by user |
| `balance_update` | - | Balance change from deposit/withdrawal |

## Order Status Summary

| status | Description |
|--------|-------------|
| `OPEN` | Order resting on orderbook |
| `MATCHING` | Order locked for in-flight transaction |
| `FILLED` | Order fully filled |
| `CANCELLED` | Order cancelled |

## Unsubscribe

```json
{
  "method": "unsubscribe",
  "params": {
    "type": "user"
  }
}
```
