---
title: 'User Stream'
description: 'Real-time updates for user orders, fills, and balances'
---

## Overview

The `user` channel provides a unified stream of all user-specific events:
- Order fills (maker and taker)
- Order placements (limit orders resting on book)
- Order cancellations  
- Balance updates after deposits/withdrawals

Upon subscription, you receive an **initial snapshot** of all open orders and balances, followed by real-time updates.

All prices and amounts are returned as **decimal strings** (e.g., `"0.65"`, `"1.5"`) matching the REST API format.

<Warning>
**Authentication Required**: The user stream requires authentication. See [WebSocket Authentication](/websocket/authentication) for details.
</Warning>

## Subscribe

To subscribe to the user stream, connect with authentication and send:

```json
{
  "method": "subscribe",
  "params": {
    "type": "user"
  }
}
```

## Initial Snapshot

Immediately after subscribing, you receive the user's current state:

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "event_type": "snapshot",
    "orders": [
      {
        "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
        "orderbook_id": "5BNoPgYe_CrhujZLf",
        "order_hash": "0xabc123...",
        "side": "bid",
        "maker_amount": "2.000000",
        "taker_amount": "1.300000",
        "remaining": "1.000000",
        "filled": "1.000000",
        "price": "0.650000",
        "created_at": 1736456789000,
        "expiration": 0,
        "base_mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
        "quote_mint": "CrhujZLfmzffVjwUTk6wL1mYeF9nRkx4MBvHmEotnaDF",
        "outcome_index": 0
      }
    ],
    "balances": {
      "5BNoPgYe_CrhujZLf": {
        "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
        "orderbook_id": "5BNoPgYe_CrhujZLf",
        "outcomes": [
          {
            "outcome_index": 0,
            "mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
            "idle": "5.000000",
            "on_book": "2.000000"
          },
          {
            "outcome_index": 1,
            "mint": "79s9ZAcN4zeegreY5m5S86HEsEdCt2KibspWfoUsAq3s",
            "idle": "3.000000",
            "on_book": "0.000000"
          }
        ]
      }
    }
  }
}
```

## Order Updates

All order state changes are sent as `order_update` events. The `remaining` field indicates the order state:
- `remaining > "0"`: Order is still open with that amount on the book
- `remaining == "0.000000"`: Order is no longer active (fully filled or cancelled)

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "timestamp": "2026-01-09T20:43:24.123Z",
    "event_type": "order_update",
    "order": {
      "order_hash": "0xabc123...",
      "price": "0.650000",
      "fill_amount": "1.000000",
      "remaining": "0.000000",
      "filled": "1.000000",
      "side": "bid",
      "is_maker": false,
      "created_at": 1736456789000,
      "base_mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
      "quote_mint": "CrhujZLfmzffVjwUTk6wL1mYeF9nRkx4MBvHmEotnaDF",
      "outcome_index": 0,
      "balance": { ... }
    }
  }
}
```

- `remaining > 0`: Order still open on book
- `remaining == 0`: Order fully filled or cancelled

## Balance Updates

Deposits and withdrawals trigger `balance_update` events:

```json
{
  "type": "user",
  "version": 0.1,
  "data": {
    "event_type": "balance_update",
    "market_pubkey": "FjVJXzKknRoxgdQHNfdMkzq2vswGacM3MHiZhahczBsL",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "balance": {
      "outcomes": [
        {
          "outcome_index": 0,
          "mint": "5BNoPgYemyrbS4ub7MTuKczoYA7qtJZTj5m7xVanupPR",
          "idle": "5.000000",
          "on_book": "0.000000"
        },
        {
          "outcome_index": 1,
          "mint": "79s9ZAcN4zeegreY5m5S86HEsEdCt2KibspWfoUsAq3s",
          "idle": "5.000000",
          "on_book": "0.000000"
        }
      ]
    },
    "timestamp": "2026-01-09T20:43:24.123Z"
  }
}
```

## Event Types Summary

| Event Type | Description |
|------------|-------------|
| `snapshot` | Initial state with all open orders and balances |
| `order_update` | Order state change (placed, filled, cancelled) |
| `balance_update` | Balance change from deposit/withdrawal |

## Unsubscribe

```json
{
  "method": "unsubscribe",
  "params": {
    "type": "user"
  }
}
```
