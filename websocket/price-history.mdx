---
title: 'Price Stream'
description: 'Real-time OHLCV candles for charting'
---

## Overview

The `price_history` channel provides real-time OHLCV (Open, High, Low, Close, Volume) data for charting. You can choose between lightweight midpoint-only updates or full OHLCV data.

All prices and volumes are returned as **decimal strings** (e.g., `"0.65"`, `"10.5"`) matching the REST API format.

## Subscribe

### Midpoint Only (Default - Lighter Payload)

```json
{
  "method": "subscribe",
  "params": {
    "type": "price_history",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1h"
  }
}
```

### With Full OHLCV

```json
{
  "method": "subscribe",
  "params": {
    "type": "price_history",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1h",
    "include_ohlcv": true
  }
}
```

## Parameters

<ParamField path="orderbook_id" type="string" required>
  Orderbook ID to get price history for
</ParamField>

<ParamField path="resolution" type="string" required>
  Candle resolution. Supported values:
  - `1m` - 1 minute
  - `5m` - 5 minutes  
  - `15m` - 15 minutes
  - `1h` - 1 hour
  - `4h` - 4 hours
  - `1d` - 1 day
</ParamField>

<ParamField path="include_ohlcv" type="boolean">
  Include full OHLCV data (default: `false`)
</ParamField>

## Messages

### Initial Snapshot (Midpoint Only)

```json
{
  "type": "price_history",
  "version": 0.1,
  "data": {
    "event_type": "snapshot",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1h",
    "include_ohlcv": false,
    "prices": [
      {"t": 1736456400000, "m": "0.650000"},
      {"t": 1736460000000, "m": "0.655000"}
    ]
  }
}
```

### Initial Snapshot (With OHLCV)

```json
{
  "type": "price_history",
  "version": 0.1,
  "data": {
    "event_type": "snapshot",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1h",
    "include_ohlcv": true,
    "prices": [
      {
        "t": 1736456400000,
        "o": "0.645000",
        "h": "0.660000",
        "l": "0.640000",
        "c": "0.655000",
        "v": "10.000000",
        "m": "0.650000",
        "bb": "0.649000",
        "ba": "0.651000"
      },
      {
        "t": 1736460000000,
        "o": "0.655000",
        "h": "0.665000",
        "l": "0.650000",
        "c": "0.660000",
        "v": "8.500000",
        "m": "0.660000",
        "bb": null,
        "ba": null
      }
    ]
  }
}
```

### Real-time Update

```json
{
  "type": "price_history",
  "version": 0.1,
  "data": {
    "event_type": "update",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1m",
    "t": 1736463600000,
    "o": "0.660000",
    "h": "0.668000",
    "l": "0.658000",
    "c": "0.665000",
    "v": "5.000000",
    "m": "0.665000",
    "bb": "0.664000",
    "ba": "0.666000"
  }
}
```

## Response Fields

<ResponseField name="t" type="integer">
  Unix timestamp in milliseconds (start of candle period)
</ResponseField>

<ResponseField name="o" type="string | null">
  Open price as decimal string. `null` if no trades occurred.
</ResponseField>

<ResponseField name="h" type="string | null">
  High price as decimal string. `null` if no trades occurred.
</ResponseField>

<ResponseField name="l" type="string | null">
  Low price as decimal string. `null` if no trades occurred.
</ResponseField>

<ResponseField name="c" type="string | null">
  Close price as decimal string. `null` if no trades occurred.
</ResponseField>

<ResponseField name="v" type="string">
  Total volume traded in period as decimal string
</ResponseField>

<ResponseField name="m" type="string | null">
  Midpoint snapshot as decimal string: `(best_bid + best_ask) / 2`
  
  For historical data, carries forward from the previous period.
</ResponseField>

<ResponseField name="bb" type="string | null">
  Best bid as decimal string at snapshot time. `null` for historical data or when price service wasn't running.
</ResponseField>

<ResponseField name="ba" type="string | null">
  Best ask as decimal string at snapshot time. `null` for historical data or when price service wasn't running.
</ResponseField>

## Unsubscribe

```json
{
  "method": "unsubscribe",
  "params": {
    "type": "price_history",
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "resolution": "1h"
  }
}
```
