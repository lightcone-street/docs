---
title: 'Orderbook Updates'
description: 'Real-time orderbook data stream'
---

## Overview

The `book_update` channel provides efficient orderbook updates:
1. **Initial snapshot** with full orderbook state on subscribe
2. **Delta updates** every 50ms with only changed price levels

All prices and sizes are returned as **decimal strings** (e.g., `"0.65"`, `"100.5"`) matching the REST API format.

## Subscribe

```json
{
  "method": "subscribe",
  "params": {
    "type": "book_update",
    "orderbook_ids": ["5BNoPgYe_CrhujZLf"]
  }
}
```

### Parameters

<ParamField path="orderbook_ids" type="string[]" required>
  Array of orderbook IDs to subscribe to. You can subscribe to multiple orderbooks with one request.
</ParamField>

## Messages

### Initial Snapshot

The first message contains the full orderbook state with `is_snapshot: true` and `seq: 1`:

```json
{
  "type": "book_update",
  "version": 0.1,
  "data": {
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "timestamp": "2026-01-09T20:43:24Z",
    "is_snapshot": true,
    "seq": 1,
    "bids": [
      {"side": "bid", "price": "0.650000", "size": "1.000000"},
      {"side": "bid", "price": "0.640000", "size": "2.000000"}
    ],
    "asks": [
      {"side": "ask", "price": "0.660000", "size": "1.500000"},
      {"side": "ask", "price": "0.670000", "size": "2.500000"}
    ]
  }
}
```

### Delta Updates

Subsequent messages contain only changed price levels with a sequence number:

```json
{
  "type": "book_update",
  "version": 0.1,
  "data": {
    "orderbook_id": "5BNoPgYe_CrhujZLf",
    "timestamp": "2026-01-09T20:43:24.050Z",
    "seq": 2,
    "bids": [
      {"side": "bid", "price": "0.650000", "size": "1.500000"},
      {"side": "bid", "price": "0.640000", "size": "0.000000"}
    ],
    "asks": [
      {"side": "ask", "price": "0.660000", "size": "2.000000"}
    ]
  }
}
```

## Update Rules

<Note>
**Apply these rules to maintain your local orderbook:**
- First message has `is_snapshot: true` - replace your entire orderbook
- Subsequent messages have no `is_snapshot` field - apply deltas
- `size: "0.000000"` → Delete that price level
- `size > 0` → Update or insert that price level
</Note>

<Warning>
**Sequence Number Validation:**

Each update includes a `seq` field that increments by 1 for each message. Use this to detect missed updates:

- **Sequential (`seq: 1, 2, 3...`)**: Your connection is healthy, apply updates normally
- **Gap detected (`seq: 1, 2, 5...`)**: You missed messages! Reconnect immediately to get a fresh snapshot

If you detect a gap in the sequence, your local orderbook is likely stale and out of sync. The safest approach is to disconnect and resubscribe to receive a new snapshot with `seq: 1`.
</Warning>

## Unsubscribe

```json
{
  "method": "unsubscribe",
  "params": {
    "type": "book_update",
    "orderbook_ids": ["5BNoPgYe_CrhujZLf"]
  }
}
```
